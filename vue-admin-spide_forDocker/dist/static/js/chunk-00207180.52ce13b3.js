(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00207180"],{2017:function(e,s,t){"use strict";var o=t("cafe"),i=t.n(o);i.a},"474d":function(e,s,t){"use strict";var o=t("e508"),i=t.n(o);i.a},"9ed6":function(e,s,t){"use strict";t.r(s);var o=function(){var e=this,s=e.$createElement,o=e._self._c||s;return o("div",{staticClass:"block"},[o("div",{staticClass:"lizi"},[o("vue-particles",{attrs:{color:"#fff","particle-opacity":.7,"particles-number":60,"shape-type":"circle","particle-size":4,"lines-color":"#fff","lines-width":1,"line-linked":!0,"line-opacity":.4,"lines-distance":150,"move-speed":2,"hover-effect":!0,"hover-mode":"grab","click-effect":!0,"click-mode":"push"}})],1),o("div",{staticClass:"login-container"},[o("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,"status-icon":"",rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[o("div",{staticClass:"title-container"},[o("h3",{staticClass:"title"},[e._v("Spider 登录界面")])]),o("el-form-item",{attrs:{prop:"username"}},[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"输入用户名",placement:"left"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"user"}})],1)]),o("el-tooltip",{attrs:{content:"仅支持大小写字母、下划线、数字、- _ ? ! * @.中的字符命名",placement:"right-start",effect:"light","hide-after":4e3}},[o("el-input",{ref:"username",attrs:{placeholder:"Username",name:"username",type:"text",tabindex:"1","auto-complete":"off"},model:{value:e.loginForm.username,callback:function(s){e.$set(e.loginForm,"username",s)},expression:"loginForm.username"}})],1)],1),o("el-form-item",{attrs:{prop:"password"}},[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"输入密码",placement:"left"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"password"}})],1)]),o("el-tooltip",{attrs:{content:"仅支持大小写字母、下划线、数字、- _ ? ! * @.中的字符字符且长度6个或以上",placement:"right-start",effect:"light","hide-after":4e3}},[o("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"Password",name:"password",tabindex:"2","auto-complete":"off"},nativeOn:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.handleLogin(s)}},model:{value:e.loginForm.password,callback:function(s){e.$set(e.loginForm,"password",s)},expression:"loginForm.password"}})],1),o("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[o("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击登录",placement:"left"}},[o("el-button",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(s){return s.preventDefault(),e.handleLogin(s)}}},[e._v("Login")])],1),o("div",{staticClass:"register"},[o("span",{staticStyle:{"font-size":"15px",color:"white"}},[e._v(" 没有账号，立即 "),o("el-link",{staticStyle:{"font-size":"15px"},attrs:{type:"primary"},on:{click:e.open}},[o("u",[e._v("加入我们")]),o("i",{staticClass:"el-icon-position"})])],1),o("div",{staticClass:"drawer-class"},[o("el-drawer",{ref:"drawer",attrs:{title:"我嵌套了 Form !","with-header":!1,"before-close":e.handleClose,modal:!1,visible:e.dialog,direction:"rtl","custom-class":"demo-drawer"},on:{"update:visible":function(s){e.dialog=s}}},[o("div",{staticClass:"demo-drawer__content"},[o("el-page-header",{staticStyle:{color:"black"},attrs:{content:""},on:{back:e.cancelForm}}),o("div",{staticClass:"drawer-header"},[o("span",{staticStyle:{"font-size":"44px",color:"black"}},[e._v(" 欢迎注册 "),o("strong",[e._v("Spider")])]),o("p",{staticStyle:{"font-size":"22px",color:"#333333"}},[e._v("每一天，乐在使用。")])]),o("div",{staticClass:"register-input"},[o("i",{staticClass:"el-icon-user",staticStyle:{"font-size":"16px",color:"#2ac06d","padding-left":"20px"}}),o("el-tooltip",{attrs:{content:"用户密码不要包含中文、空格特殊字符等",placement:"top-end",effect:"light"}},[o("el-input",{attrs:{placeholder:"用户名",clearable:""},on:{change:e.checkRegisUsername},model:{value:e.regisForm.username,callback:function(s){e.$set(e.regisForm,"username",s)},expression:"regisForm.username"}})],1),o("i",{staticClass:"el-icon-key",staticStyle:{"font-size":"16px",color:"#2ac06d","padding-left":"20px"}}),o("el-input",{key:e.passwordType2,attrs:{placeholder:"密码",type:e.passwordType2,clearable:""},on:{change:e.checkRegisPassword},model:{value:e.regisForm.password,callback:function(s){e.$set(e.regisForm,"password",s)},expression:"regisForm.password"}}),o("span",{staticClass:"show-regis-pwd",on:{click:e.showPwd2}},[o("svg-icon",{attrs:{"icon-class":"password"===e.passwordType2?"eye":"eye-open"}})],1),o("i",{staticClass:"el-icon-message",staticStyle:{"font-size":"16px",color:"#2ac06d","padding-left":"20px"}}),o("el-tooltip",{attrs:{content:"当前仅支持QQ邮箱注册",placement:"top-end",effect:"light"}},[o("el-input",{attrs:{placeholder:"QQ邮箱",clearable:""},on:{change:e.checkRegisEmail},model:{value:e.regisForm.email,callback:function(s){e.$set(e.regisForm,"email",s)},expression:"regisForm.email"}})],1),o("el-button",{attrs:{type:"primary",plain:"plain",disabled:e.isDisable},on:{click:e.sendcode}},[e._v(e._s(e.buttonText))]),o("el-input",{staticClass:"input-capture",attrs:{placeholder:"验证码",disabled:e.isEmailDisable,clearable:""},model:{value:e.regisForm.capture,callback:function(s){e.$set(e.regisForm,"capture",s)},expression:"regisForm.capture"}}),o("div",{staticClass:"sure_button"},[o("el-button",{attrs:{type:"primary",icon:"el-icon-thumb",round:"",disabled:e.isDisable},on:{click:e.handleRegis}},[e._v("确认注册")])],1)],1),o("div",{staticClass:"demo-drawer__footer"},[o("img",{staticStyle:{"margin-top":"5px"},attrs:{src:t("e1ab")}})])],1)])],1)])],1)],1)])},i=[],a=t("61f7"),r=t("b2a6"),n=t("82af"),l={name:"Login",data:function(){var e=function(e,s,t){Object(a["c"])(s)?t():t(new Error("用户名为空或含有空格、特殊字符"))},s=function(e,s,t){Object(a["c"])(s)&&s.length>=6?t():t(new Error("密码长度低于6位或含有特殊字符"))};return{loginForm:{username:"",password:"",email:""},regisForm:{username:"",password:"",email:"",capture:"",isEmail:!1,isUsername:!1,isPassword:!1},loginRules:{username:[{required:!0,trigger:"blur",validator:e}],password:[{required:!0,trigger:"blur",validator:s}]},buttonText:"发送验证码",loading:!1,passwordType:"password",passwordType2:"password",redirect:void 0,isDisable:!0,isEmailDisable:!0,csrf_token:"",dialog:!1,timer:null}},watch:{loginForm:{handler:function(){""!=this.loginForm.username&&(Object(n["c"])("username",this.loginForm.username,.05),console.log("watch username",this.loginForm.username)),""!=this.loginForm.password&&(Object(n["c"])("password",this.loginForm.password,.05),console.log("watch password",this.loginForm.password))},deep:!0}},methods:{showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},showPwd2:function(){"password"===this.passwordType2?this.passwordType2="":this.passwordType2="password",this.$nextTick((function(){}))},checkRegisUsername:function(){var e=this.regisForm.username;e||(this.regisForm.isUsername=!1,this.$notify({message:"用户名不能为空，请重新输入",type:"error",duration:2500})),e&&(this.regisForm.isUsername=Object(a["c"])(e),this.regisForm.isUsername||this.$notify({message:"用户名不合法，请重新输入",type:"error",duration:2500}))},checkRegisPassword:function(){var e=this.regisForm.password;if(e.length<6)return this.regisForm.isPassword=!1,void this.$notify({message:"密码长度小于6位",type:"error",duration:2500});e&&(this.regisForm.isPassword=Object(a["c"])(e),this.regisForm.isPassword||this.$notify({message:"密码不合法，请重新输入",type:"error",duration:2500}))},checkRegisEmail:function(){var e=this,s=this.regisForm.email;s||(this.regisForm.isEmail=!1,this.isDisable=!0,this.buttonText="发送验证码",this.regisForm.isEmailDisable=!0),s&&setTimeout((function(){var t=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;t.test(s)?(e.isDisable=!1,console.log("right"),e.regisForm.isEmail=!0):(e.$notify({message:"请输入有效的电子邮箱！",type:"error",duration:2500}),e.regisForm.isEmail=!1,e.isDisable=!0,e.regisForm.isEmailDisable=!0)}),500)},getcsrf_login:function(){var e=this;this.$axios.get("/").then((function(s){s.data?(console.log("get resp_data:",s.data),e.csrf_token=s.headers["csrf_token"],console.log(e.csrf_token)):console.log("get / 请求结果为空...");var t=Object(n["a"])(e.loginForm.password);e.$axios.post("/login",{csrf_token:e.csrf_token,username:e.loginForm.username,passwd:t}).then((function(s){s.data?(console.log("post resp_data:",s.data),Object(r["b"])(s),"0"===s.data.code&&(e.loading=!0,e.$router.push({path:e.redirect||"/dashboard"}),e.loading=!1,Object(n["c"])("username",e.loginForm.username,24),Object(n["c"])("password",t,24))):console.log("post login 请求结果为空...")})).catch((function(e){e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):console.log("err:",e.message),console.log(e.config)}))}))},getcsrf_regis:function(){var e=this;this.$axios.get("/").then((function(s){s.data?(console.log("get resp_data:",s.data),e.csrf_token=s.headers["csrf_token"],console.log(e.csrf_token)):console.log("get / 请求结果为空...");var t=Object(n["a"])(e.regisForm.password);e.$axios.post("/register",{email:e.regisForm.email,csrf_token:e.csrf_token,username:e.regisForm.username,passwd:t,capture:e.regisForm.capture}).then((function(s){s.data?(console.log("post resp_data:",s.data),Object(r["b"])(s),"0"===s.data.code?(e.loading=!0,Object(n["c"])("username",e.regisForm.username,24),Object(n["c"])("password",t,24),e.$router.push({path:e.redirect||"/dashboard"}),e.loading=!1):(localStorage.removeItem("username"),localStorage.removeItem("password"))):console.log("post register 请求结果为空...")})).catch((function(e){e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):console.log("err:",e.message),console.log(e.config)}))}))},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(s){if(!s)return console.log("error submit!!"),!1;e.getcsrf_login()}))},handleRegis:function(){console.log(this.regisForm.isUsername,this.regisForm.isPassword,this.regisForm.isEmail,this.regisForm.capture),this.regisForm.isUsername&&this.regisForm.isPassword&&this.regisForm.isEmail&&this.regisForm.capture&&this.getcsrf_regis()},handleClose:function(e){var s=this;this.loading||this.$confirm("确定要提交表单吗？").then((function(t){s.timer=setTimeout((function(){e(),setTimeout((function(){s.loading=!1}),400)}),2e3)})).catch((function(e){}))},cancelForm:function(){this.loading=!1,this.dialog=!1,clearTimeout(this.timer),this.loading=!1},open:function(){this.$message({showClose:!0,message:"欢迎新用户注册",type:"success",duration:2e3}),this.dialog=!0},getcsrf_regis_emailCode:function(){this.$axios.get("/get_capture",{params:{email:this.regisForm.email}}).then((function(e){e.data?(console.log("post resp_data:",e.data),Object(r["b"])(e)):console.log("post register 请求结果为空...")})).catch((function(e){e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):console.log("err:",e.message),console.log(e.config)}))},sendcode:function(){this.checkRegisEmail(),this.regisForm.isEmail&&""!==this.regisForm.email?(console.log("email is ok"),this.$notify({title:"发送成功",message:"请尽快前往"+this.regisForm.email+"邮箱查收!",type:"success",duration:2500}),this.buttonText="已发送",this.isDisable=!0,this.isEmailDisable=!1,this.getcsrf_regis_emailCode()):(this.buttonText="发送验证码",this.isEmailDisable=!0,console.log("email error"))}}},c=l,d=(t("2017"),t("474d"),t("2877")),p=Object(d["a"])(c,o,i,!1,null,"2cadc125",null);s["default"]=p.exports},cafe:function(e,s,t){},e508:function(e,s,t){}}]);