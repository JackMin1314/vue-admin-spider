(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21b0e9"],{bdc4:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"handler-log"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{fit:"true",align:"center",label:"文件名"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.filename))])]}}])}),n("el-table-column",{attrs:{fit:"true",align:"center",label:"文件大小"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.filesize))])]}}])}),n("el-table-column",{attrs:{fit:"true",align:"center",label:"创建日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.maketime))])]}}])}),n("el-table-column",{attrs:{fit:"true",align:"center",label:"Actions"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",icon:"el-icon-download",circle:"",plain:""},on:{click:function(n){return e.download(t.$index,t.row)}}}),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",plain:""},on:{click:function(n){return e.handledelete(t.$index,t.row)}}})]}}])})],1)],1)},o=[],l=(n("c975"),n("a434"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("b2a6")),i=n("82af"),r={name:"handler-log",data:function(){return{tableData:[],listLoading:!1}},created:function(){this.get_fileslist_info()},methods:{download:function(e,t){var n=this;this.$axios("/").then((function(e){n.$axios({method:"POST",url:"/download_logdb",data:{csrf_token:e.headers["csrf_token"],username:Object(i["b"])("username"),filename:t.filename},responseType:"blob"}).then((function(e){if(Object(l["b"])(e),"-1"!=e.data.code&&200===e.status){var n=window.URL.createObjectURL(e.data),a=document.createElement("a");a.style.display="none",a.href=n,a.setAttribute("download",t.filename),document.body.appendChild(a),a.click(),document.body.removeChild(a)}}))}))},handledelete:function(e,t){var n=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.$axios.get("/").then((function(a){n.$axios.post("/handle_logdb",{username:Object(i["b"])("username"),csrf_token:a.headers["csrf_token"],filename:t.filename}).then((function(a){if(a.data&&(Object(l["b"])(a),"0"===a.data.code)){if(-1!=t.filename.indexOf(".txt"))return;n.tableData.splice(e,1)}})).catch((function(e){error.response?(console.log(error.response.data),console.log(error.response.status)):console.log("err:",error.message),console.log(error.config)}))}))})).catch((function(){n.$message({type:"info",message:"已取消删除"})}))},get_fileslist_info:function(){var e=this;this.$axios.get("/errlogs_db_info").then((function(t){Object(l["b"])(t),t.data&&"0"==t.data.code&&(e.listLoading=!0,e.tableData=t.data.data,e.listLoading=!1)})).catch((function(e){console.log("errlogs_db_info出错:",e),console.log(e.data)}))}}},s=r,c=n("2877"),d=Object(c["a"])(s,a,o,!1,null,"e676dd68",null);t["default"]=d.exports}}]);